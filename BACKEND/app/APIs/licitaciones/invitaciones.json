{
  "endpoints": [
    {
      "method": "POST",
      "url": "/api/licitaciones/{id}/invitaciones",
      "summary": "Registrar invitaciones a proveedores",
      "description": "Registra los proveedores invitados en la tabla 'invitaciones_proveedores'.",
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": { "type": "integer" }
        }
      ],
      "requestBody": {
        "required": true,
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "proveedores": {
                  "type": "array",
                  "items": {
                    "type": "integer",
                    "description": "ID del proveedor invitado"
                  },
                  "minItems": 1
                }
              },
              "required": ["proveedores"]
            }
          }
        }
      },
      "responses": {
        "201": {
          "description": "Invitaciones registradas exitosamente",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "mensaje": { "type": "string" },
                  "invitaciones_creadas": { "type": "integer" }
                }
              }
            }
          }
        }
      }
    },
    {
      "method": "GET",
      "url": "/api/licitaciones/{id}/invitaciones",
      "summary": "Listar proveedores invitados",
      "description": "Obtiene la lista de la tabla 'invitaciones_proveedores'.",
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": { "type": "integer" }
        }
      ],
      "responses": {
        "200": {
          "description": "Lista de invitados",
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id_invitacion": { "type": "integer" },
                    "proveedor_id": { "type": "integer" },
                    "fecha_invitacion": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    {
      "method": "POST",
      "url": "/api/licitaciones/{id}/finalizar-invitacion",
      "summary": "Finalizar proceso de invitación",
      "description": "Cierra la etapa de invitación. Actualiza 'licitaciones': establece 'invitaciones_enviadas'=TRUE y cambia 'estado' a 'EN_INVITACION'.",
      "parameters": [
        {
          "name": "id",
          "in": "path",
          "required": true,
          "schema": { "type": "integer" }
        }
      ],
      "responses": {
        "200": {
          "description": "Invitación finalizada. Estado: EN_INVITACION.",
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id_licitacion": { "type": "integer" },
                  "estado": { "type": "string", "example": "EN_INVITACION" }
                }
              }
            }
          }
        }
      }
    }
  ]
}
